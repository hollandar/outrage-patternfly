@using Outrage.Patternfly.Components.Spinner;
@using Outrage.Patternfly.Components.Layout;

@if (InProgress)
{
    <PatternflyBullseye>
        <PatternflySpinner />
    </PatternflyBullseye>
}
else
{
    @ChildContent
}

@code {
    [Parameter] public object? Target { get; set; } = null;
    [Parameter] public bool Complete { get; set; } = false;
    [Parameter] public RenderFragment ChildContent { get; set; }

    private bool InProgress
    {
        get
        {
            return Target == null && !Complete;
        }
    }

    public async Task SetComplete()
    {
        this.Complete = true;
        await this.InvokeAsync(StateHasChanged);
    }

    public async Task SetLoading()
    {
        this.Complete = false;
        await this.InvokeAsync(StateHasChanged);
    }

}
